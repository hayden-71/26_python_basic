import time
import os

# 20x20 "빗살무늬(Comb)" 함정 맵
# 1:벽, 0:길, 2:시작, 3:도착
maze = [
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 1],
]

# 방향 정의 (북, 동, 남, 서)
dy = [-1, 0, 1, 0]
dx = [0, 1, 0, -1]

# 시작 위치 (1, 1)
y, x = 1, 1

# ★ 중요: 함정에 빠지게 하려면 '남쪽(아래)'을 보게 해야 합니다.
# 남쪽을 보면 '왼쪽'이 '동쪽'이 되므로, 동쪽에 뚫린 빗살무늬 함정으로 쏙쏙 들어갑니다.
direction = 2  # 0:북, 1:동, 2:남, 3:서

step_count = 0

while True:
    # 화면 지우기 및 출력
    os.system("cls" if os.name == "nt" else "clear")
    print(f"=== 왼손 법칙의 함정 (이동 횟수: {step_count}) ===")

    for r in range(len(maze)):
        for c in range(len(maze[r])):
            if r == y and c == x:
                print("🐹", end="")
            elif maze[r][c] == 1:
                print("🧱", end="")
            elif maze[r][c] == 2:
                print("🚩", end="")
            elif maze[r][c] == 3:
                print("🏁", end="")
            else:
                print("  ", end="")  # 공백 2칸
        print()

    if maze[y][x] == 3:
        print("\n🎉 도착! 하지만 너무 많이 걸었네요... 🎉")
        break

    # --- 왼손 법칙 로직 ---
    left_dir = (direction - 1) % 4
    left_y, left_x = y + dy[left_dir], x + dx[left_dir]

    front_y, front_x = y + dy[direction], x + dx[direction]

    # 1. 왼쪽이 뚫려있으면 -> 턴 & 전진 (함정으로 들어감)
    if maze[left_y][left_x] != 1:
        direction = left_dir
        y, x = left_y, left_x
        step_count += 1
    # 2. 직진 가능하면 -> 전진
    elif maze[front_y][front_x] != 1:
        y, x = front_y, front_x
        step_count += 1
    # 3. 막힘 -> 우회전
    else:
        direction = (direction + 1) % 4

    time.sleep(0.05)  # 속도 조절 (너무 느리면 답답하므로 0.05 추천)
